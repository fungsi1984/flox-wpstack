{
  "lockfile-version": 1,
  "manifest": {
    "version": 1,
    "install": {
      "gum": {
        "pkg-path": "gum"
      },
      "mysql80": {
        "pkg-path": "mysql80"
      },
      "nginx": {
        "pkg-path": "nginx"
      },
      "php": {
        "pkg-path": "php82"
      },
      "wordpress": {
        "pkg-path": "wordpress"
      }
    },
    "vars": {
      "MYSQL_DATABASE": "wordpress",
      "MYSQL_HOST": "127.0.0.1",
      "MYSQL_PASSWORD": "wordpress",
      "MYSQL_PORT": "3306",
      "MYSQL_USER": "root",
      "WORDPRESS_DB_HOST": "127.0.0.1",
      "WORDPRESS_DB_NAME": "wordpress",
      "WORDPRESS_DB_PASSWORD": "wordpress",
      "WORDPRESS_DB_USER": "root"
    },
    "hook": {
      "on-activate": "\n# MySQL directories\nexport MYSQL_DIR=\"$FLOX_ENV_CACHE/mysql\"\nexport MYSQL_DATADIR=\"$MYSQL_DIR/data\"\nexport MYSQL_SOCKET=\"$MYSQL_DIR/mysql.sock\"\nexport MYSQL_PIDFILE=\"$MYSQL_DIR/mysql.pid\"\n\n# WordPress directories\nexport WORDPRESS_DIR=\"$FLOX_ENV_PROJECT/wordpress\"\nexport NGINX_DIR=\"$FLOX_ENV_CACHE/nginx\"\nexport PHP_FPM_DIR=\"$FLOX_ENV_CACHE/php-fpm\"\n\n# Initialize MySQL data directory\nif [[ ! -d \"$MYSQL_DATADIR\" ]]; then\n  mkdir -p \"$MYSQL_DIR\"\n  mysqld --initialize-insecure --datadir=\"$MYSQL_DATADIR\" --user=$(whoami)\n  echo \"âœ… MySQL initialized\"\nfi\n\n# Create MySQL config\nif [[ ! -f \"$MYSQL_DIR/my.cnf\" ]]; then\n  tee \"$MYSQL_DIR/my.cnf\" > /dev/null << EOF\n[mysqld]\ndatadir = $MYSQL_DATADIR\nsocket = $MYSQL_SOCKET\npid-file = $MYSQL_PIDFILE\nport = $MYSQL_PORT\nbind-address = $MYSQL_HOST\nskip-networking = 0\nEOF\n  echo \"âœ… MySQL configuration created\"\nfi\n\n# Setup WordPress\nif [[ ! -d \"$WORDPRESS_DIR\" ]]; then\n  mkdir -p \"$WORDPRESS_DIR\"\n  cd \"$FLOX_ENV_PROJECT\"\n  if [[ ! -f \"latest.tar.gz\" ]]; then\n    wget -q https://wordpress.org/latest.tar.gz\n  fi\n  tar -xzf latest.tar.gz\n  echo \"âœ… WordPress downloaded and extracted\"\nfi\n\n# Setup MySQL database creation script\ntee \"$MYSQL_DIR/setup.sql\" > /dev/null << EOF\nCREATE DATABASE IF NOT EXISTS $WORDPRESS_DB_NAME;\nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('$WORDPRESS_DB_PASSWORD');\nGRANT ALL PRIVILEGES ON $WORDPRESS_DB_NAME.* TO '$WORDPRESS_DB_USER'@'localhost';\nGRANT ALL PRIVILEGES ON $WORDPRESS_DB_NAME.* TO '$WORDPRESS_DB_USER'@'127.0.0.1';\nSET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('$WORDPRESS_DB_PASSWORD');\nFLUSH PRIVILEGES;\nEOF\n\n# Create wp-config.php (always recreate to update settings)\nrm -f \"$WORDPRESS_DIR/wp-config.php\"\ntee \"$WORDPRESS_DIR/wp-config.php\" > /dev/null << EOF\n<?php\ndefine('DB_NAME', '$WORDPRESS_DB_NAME');\ndefine('DB_USER', '$WORDPRESS_DB_USER');\ndefine('DB_PASSWORD', '$WORDPRESS_DB_PASSWORD');\ndefine('DB_HOST', '$WORDPRESS_DB_HOST');\ndefine('DB_CHARSET', 'utf8');\ndefine('DB_COLLATE', '');\n\ndefine('AUTH_KEY',         'put your unique phrase here');\ndefine('SECURE_AUTH_KEY',  'put your unique phrase here');\ndefine('LOGGED_IN_KEY',    'put your unique phrase here');\ndefine('NONCE_KEY',        'put your unique phrase here');\ndefine('AUTH_SALT',        'put your unique phrase here');\ndefine('SECURE_AUTH_SALT', 'put your unique phrase here');\ndefine('LOGGED_IN_SALT',   'put your unique phrase here');\ndefine('NONCE_SALT',       'put your unique phrase here');\n\n\\$table_prefix = 'wp_';\ndefine('WP_DEBUG', true);\ndefine('WP_DEBUG_LOG', true);\n\nif ( !defined('ABSPATH') )\n    define('ABSPATH', dirname(__FILE__) . '/');\n\nrequire_once(ABSPATH . 'wp-settings.php');\nEOF\necho \"âœ… WordPress wp-config.php created\"\n\n# Setup nginx config\nmkdir -p \"$NGINX_DIR\"\nrm -f \"$NGINX_DIR/nginx.conf\"  # Always recreate config\ntee \"$NGINX_DIR/nginx.conf\" > /dev/null << EOF\nerror_log $NGINX_DIR/error.log;\npid $NGINX_DIR/nginx.pid;\n\nevents { worker_connections 1024; }\nhttp {\n  default_type application/octet-stream;\n  access_log $NGINX_DIR/access.log;\n  \n  # MIME types\n  types {\n    text/html html htm;\n    text/css css;\n    application/javascript js;\n    image/jpeg jpg jpeg;\n    image/png png;\n    image/gif gif;\n    image/svg+xml svg;\n    image/x-icon ico;\n    font/woff woff;\n    font/woff2 woff2;\n  }\n  \n  server {\n    listen 8080;\n    root $WORDPRESS_DIR;\n    index index.php index.html;\n    \n    # Static files\n    location ~* \\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2)\\$ {\n      expires 1y;\n      add_header Cache-Control \"public, immutable\";\n      try_files \\$uri =404;\n    }\n    \n    location / {\n      try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n    \n    location ~ \\.php\\$ {\n      try_files \\$uri =404;\n      fastcgi_pass 127.0.0.1:9000;\n      fastcgi_index index.php;\n      fastcgi_read_timeout 300;\n      fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n      fastcgi_param QUERY_STRING \\$query_string;\n      fastcgi_param REQUEST_METHOD \\$request_method;\n      fastcgi_param CONTENT_TYPE \\$content_type;\n      fastcgi_param CONTENT_LENGTH \\$content_length;\n      fastcgi_param SCRIPT_NAME \\$fastcgi_script_name;\n      fastcgi_param REQUEST_URI \\$request_uri;\n      fastcgi_param DOCUMENT_URI \\$document_uri;\n      fastcgi_param DOCUMENT_ROOT \\$document_root;\n      fastcgi_param SERVER_PROTOCOL \\$server_protocol;\n      fastcgi_param GATEWAY_INTERFACE CGI/1.1;\n      fastcgi_param SERVER_SOFTWARE nginx/\\$nginx_version;\n      fastcgi_param REMOTE_ADDR \\$remote_addr;\n      fastcgi_param REMOTE_PORT \\$remote_port;\n      fastcgi_param SERVER_ADDR \\$server_addr;\n      fastcgi_param SERVER_PORT \\$server_port;\n      fastcgi_param SERVER_NAME \\$server_name;\n      fastcgi_param HTTPS off;\n    }\n  }\n}\nEOF\necho \"âœ… Nginx configuration created\"\n\n# Setup PHP-FPM config\nmkdir -p \"$PHP_FPM_DIR\"\nif [[ ! -f \"$PHP_FPM_DIR/php-fpm.conf\" ]]; then\n  tee \"$PHP_FPM_DIR/php-fpm.conf\" > /dev/null << EOF\n[global]\npid = $PHP_FPM_DIR/php-fpm.pid\nerror_log = $PHP_FPM_DIR/php-fpm.log\n\n[www]\nlisten = 127.0.0.1:9000\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\nEOF\n  echo \"âœ… PHP-FPM configuration created\"\nfi\n\ngum style --border double --margin \"1 2\" --padding \"1 4\" \\\n  'Start all services:' \\\n  '  ðŸ‘‰ flox services start' \\\n  '  ðŸ‘‰ flox activate --start-services' '' \\\n  'Access WordPress:' \\\n  '  ðŸ‘‰ http://localhost:8080' '' \\\n  'Database connection info:' \\\n  \"  Host: $WORDPRESS_DB_HOST\" \\\n  \"  Database: $WORDPRESS_DB_NAME\" \\\n  \"  Username: $WORDPRESS_DB_USER\" \\\n  \"  Password: $WORDPRESS_DB_PASSWORD\"\n\n"
    },
    "options": {
      "systems": [
        "x86_64-linux"
      ]
    },
    "services": {
      "mysql": {
        "command": "mysqld --defaults-file=$MYSQL_DIR/my.cnf --init-file=$MYSQL_DIR/setup.sql"
      },
      "nginx": {
        "command": "nginx -c $NGINX_DIR/nginx.conf -g 'daemon off;'"
      },
      "php-fpm": {
        "command": "php-fpm -F -y $PHP_FPM_DIR/php-fpm.conf"
      }
    }
  },
  "packages": [
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/951v689kca12iqxpjc2av4yq6mkj42kk-gum-0.16.0.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "name": "gum-0.16.0",
      "pname": "gum",
      "rev": "292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "rev_count": 802366,
      "rev_date": "2025-05-18T04:33:40Z",
      "scrape_date": "2025-05-20T05:44:50.841556Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/w094m6kjn97wa2wrvj4mrjng0fnzmpw3-gum-0.16.0"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "mysql80",
      "broken": false,
      "derivation": "/nix/store/3bjymsjq44cwj8hzkqrqxb8p3c1wgxig-mysql-8.0.42.drv",
      "description": "World's most popular open source database",
      "install_id": "mysql80",
      "license": "GPL-2.0-only",
      "locked_url": "https://github.com/flox/nixpkgs?rev=292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "name": "mysql-8.0.42",
      "pname": "mysql80",
      "rev": "292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "rev_count": 802366,
      "rev_date": "2025-05-18T04:33:40Z",
      "scrape_date": "2025-05-20T05:45:00.829123Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "8.0.42",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/vfhxipwb5p9xm8adv74klhplngnp5d4w-mysql-8.0.42",
        "static": "/nix/store/vn0rnncxk1h12jxjds68j7r4rdal5n0c-mysql-8.0.42-static"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "nginx",
      "broken": false,
      "derivation": "/nix/store/9ppbrbaj5njnm388f0rgzqm6k6ncxc1m-nginx-1.28.0.drv",
      "description": "Reverse proxy and lightweight webserver",
      "install_id": "nginx",
      "license": "[ BSD-2-Clause, BSD-2-Clause, BSD-2-Clause, BSD-2-Clause ]",
      "locked_url": "https://github.com/flox/nixpkgs?rev=292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "name": "nginx-1.28.0",
      "pname": "nginx",
      "rev": "292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "rev_count": 802366,
      "rev_date": "2025-05-18T04:33:40Z",
      "scrape_date": "2025-05-20T05:45:01.207076Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "1.28.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "doc": "/nix/store/pdbb8b0hzjndgqxj79f3rqs1dq1w2wdc-nginx-1.28.0-doc",
        "out": "/nix/store/3qk4g71ciq7hf06nmy252qf4ng36g0s7-nginx-1.28.0"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "php82",
      "broken": false,
      "derivation": "/nix/store/5j81d9py6rcfw6020bk98fbyvnyppcbv-php-with-extensions-8.2.28.drv",
      "description": "HTML-embedded scripting language",
      "install_id": "php",
      "license": "PHP-3.01",
      "locked_url": "https://github.com/flox/nixpkgs?rev=292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "name": "php-with-extensions-8.2.28",
      "pname": "php82",
      "rev": "292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "rev_count": 802366,
      "rev_date": "2025-05-18T04:33:40Z",
      "scrape_date": "2025-05-20T05:45:10.435058Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "8.2.28",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/2dm8p2fhfi6biwx1h45m9cm3a31l4nch-php-with-extensions-8.2.28"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "wordpress",
      "broken": false,
      "derivation": "/nix/store/jan6blq9cj3mllvjb4x3fignzad9zksd-wordpress-6.8.1.drv",
      "description": "WordPress is open source software you can use to create a beautiful website, blog, or app",
      "install_id": "wordpress",
      "license": "[ GPL-2.0-or-later ]",
      "locked_url": "https://github.com/flox/nixpkgs?rev=292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "name": "wordpress-6.8.1",
      "pname": "wordpress",
      "rev": "292fa7d4f6519c074f0a50394dbbe69859bb6043",
      "rev_count": 802366,
      "rev_date": "2025-05-18T04:33:40Z",
      "scrape_date": "2025-05-20T05:46:32.769027Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "6.8.1",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/ryij03jsqgbgqbnlds440xyky9kcxwj1-wordpress-6.8.1"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    }
  ]
}